---
slug: git-03-04-branching-workflows
title: "3.4 分支开发工作流 — 团队协作的艺术"
authors: [yeezi]
tags: [git, progit, 工作流, 最佳实践]
date: 2025-01-10T12:00:00
---

学会了 `checkout` 和 `merge` 只是学会了这一行的基本操作。知道在什么时候应该开什么分支，才是软件工程的艺术。
Git 非常灵活，它不强迫你使用任何特定的流程。但经过这么多年的演化，开发社区总结出了几种经典的工作流。

作为一个技术负责人，我通常会根据团队的规模和发布频率来选择工作流。今天分享几种最常见的。

<!--truncate-->

### 长期分支 (Long-Running Branches)

这是最经典的模型，适合追求稳定的项目。

1.  **master/main 分支**：极其稳定。只有发布后的代码才会在 这里。这里的代码永远是随时可以部署的状态。
2.  **develop 分支**：这是日常开发的“主战场”。所有新的功能合并到这里，进行集成测试。
3.  **topic 分支**：短期存在的特性分支。

在这个模型里，代码像水流一下，从 topic 汇入 develop，经过测试沉淀，最终流入 master 成为发布版本。

### 主题分支 (Topic Branches)

不管你用什么工作流，主题分支都是必须的。
一个主题分支对应一个具体的任务（Feature, Bugfix, Refactor）。
它的生命周期很短：创建 -> 开发 -> 合并 -> 删除。

这种做法的好处是：**Context Switching（上下文切换）的成本极低**。
你可以同时开三个分支处理三个不同的功能。在等待 Code Review 的时候，你可以切到另一个分支去工作。这三个任务互不干扰，提交历史也清晰独立。

### 远程分支的考量

在分布式团队中，工作流会稍微复杂一点。
通常，你们会有一个共享的远程仓库（比如 GitHub 上的 `origin`）。

**贡献流程通常是：**
1.  你在本地开一个分支 `feature-A`。
2.  开发，提交。
3.  把 `feature-A` 推送到远程：`git push origin feature-A`。
4.  在那上面发起 Pull Request (PR) 或 Merge Request (MR)。
5.  团队成员 Review 代码，提出修改意见。
6.  你在本地继续修改，push 更新，PR 会自动更新。
7.  最后由 Maintainer 合并进 `main`。

只有通过这种受控的工作流，才能在多人协作时保证代码库的质量不退化。

### 总结

没有最好的工作流，只有最适合你团队的工作流。
如果你是单兵作战，简单的 `main` + `feature` 就够了。
如果是大型团队，可能需要 Git Flow 或 Trunk Based Development。

无论选哪种，核心原则不变：**主分支永远保持干净和可运行**。不要把半成品直接扔到主分支上，那是对队友的不负责任。
