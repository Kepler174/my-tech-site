---
slug: git-02-03-viewing-history
title: "2.3 Viewing History — 当个 Git 考古学家"
authors: [yeezi]
tags: [git, progit, cli]
date: 2025-01-08T12:00:00
---

代码提交了千八百次，出了 Bug 怎么办？
这时候你就得学会用 `git log` 去翻旧账了。这可不仅仅是看一眼谁最后改的代码那么简单。

<!--truncate-->

## 最简单的时光机 (git log)

如果不加参数，它就是个流水账。按 `q` 退出。
但说实话，默认输出信息太多，有时候看不过来。

## 我常用的几个神仙参数

1.  **想看具体改了啥 (-p)**
    ```bash
    git log -p -2
    ```
    这个 `-p` 也就是 Patch（补丁），直接把代码差异甩你脸上。`-2` 表示只看最近两次。CR (Code Review) 自己的代码时很有用。

2.  **只想看个大概 (--stat)**
    同事提交了一堆东西，你只想知道他动了哪些文件？
    ```bash
    git log --stat
    ```
    这会显示类似：`index.tsx | 5 +--` 这样的统计信息，一目了然。

3.  **装酷 (Graph)**
    在终端里看分支图：
    ```bash
    git log --oneline --graph --all
    ```
    五颜六色的线，看着就能感觉分支有多乱。

## 真正的杀手锏：搜索 (-S)

这是我压箱底的一招。
假设你发现某个核心函数 `calculate_price` 居然在这个版本里找不到了！你想知道是**哪个败家子**把它删了，或者是哪次重构把它改名了。
普通的 `grep` 只能搜现在的文件，但 Git 可以搜为了过去：

```bash
git log -S calculate_price
```

Git 会从盘古开天辟地开始遍历所有提交，只把**涉及这个字符串增删**的那些 commit 找出来。
这招用来甩锅简直一查一个准。

---
学会了 `git log`，你就不再是只能盯着当前代码发呆的初学者了，你是拥有了穿越时空查看上下文能力的考古学家。
