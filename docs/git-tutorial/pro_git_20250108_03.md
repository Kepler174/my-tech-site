---
slug: git-02-02-recording-changes
title: "2.2 Recording Changes — 搬砖人的日常三连"
authors: [yeezi]
tags: [git, progit, status, diff, cli]
date: 2025-01-08T11:00:00
---

仓库有了，接下来就是干货环节。
我在公司写代码，90% 的时间都在重复这个循环：写代码 -> 检查状态 -> 暂存 -> 提交。

<!--truncate-->

## 1. 强迫症的第一步 (git status)

不管你刚才干了啥，最好先敲一下：
```bash
git status
```
这就像开车前看一眼仪表盘。它会告诉你哪些文件变了，哪些还是这种“未跟踪”的野生状态。
**老鸟建议**：用更简练的 `-s` 参数：
```bash
git status -s
```
要是看到红色的 `??`，那是新文件；红色的 `M` 是改了没暂存；绿色的 `M` 是已经暂存好了。清清爽爽。

## 2. 也是万能的 (git add)

注意，Git 里的 `add` 意思很多。
*   对新文件：开始追踪它。
*   对修改过的文件：把它放入暂存区。
*   对冲突文件：标记为“我解决完了”。

所以别管三七二十一，只要想提交，先 `git add` 肯定没错。

**关于 .gitignore**：
有些东西（比如 `node_modules` 或者是你的 `.env` 密钥文件）千万别传上去。
在项目根目录建个 `.gitignore` 文件，把名字写进去。
*记得尽早建这个文件，如果文件已经提交过了，再加 ignore 是没用的。*

## 3. 到底改了哪？ (git diff)

有时候 `git status` 告诉我 `README.md` 变了，但我忘了我改了啥。
*   `git diff`：看**工作区**改了啥（还没 add 的）。
*   `git diff --staged`：看**暂存区**里准备提交的是啥。

这对写 Commit Message 很有帮助，不然你都不知道自己在提交个啥。

## 4. 盖棺定论 (git commit)

最后一步。
```bash
git commit -m "feat: 终于写完这个功能了"
```

如果你懒得每次都 `add`，对于那些**已经被追踪过**的文件，可以直接跳过 add：
```bash
git commit -a -m "fix: 修复小 bug"
```
这招虽然省事，但千万小心别把不想提交的测试代码顺手带上去了。

## 5. 提桶跑路与反悔

*   **删除**：`git rm filename`。这就不仅仅是删文件，还顺便告诉 Git 别记它了。
*   **重命名**：`git mv old new`。Git 很聪明，它知道你是在重命名，不是删了旧的创建一个新的。

从今天起，养成 `status` -> `add` -> `commit` 的肌肉记忆吧。
