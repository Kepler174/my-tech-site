---
slug: git-02-02-recording-changes
title: "2.2 Recording Changes — 记录每次更新"
authors: [yeezi]
tags: [git, progit, status, diff, cli]
date: 2025-01-08T11:00:00
---

现在我们已经有了一个 Git 仓库，并且检出了文件。接下来我们将进行日常的开发流程：修改文件，将更新暂存，并提交到仓库中。

<!--truncate-->

## 检查当前文件状态 (git status)

查看哪些文件处于什么状态，主要的命令是 `git status`。
如果在克隆仓库后立即运行此命令，你会看到类似 "working tree clean" 的提示，说明所有文件都已跟踪且未被修改。

如果此时你在目录下创建了一个新文件（例如 `README.md`），再次运行 `git status`，Git 会将其标记为 **Untracked files**（未跟踪文件）。

## 跟踪新文件 / 暂存已修改文件 (git add)

使用 `git add` 命令可以将文件纳入 Git 的管理（开始跟踪），或者将已修改的文件放入暂存区。

```bash
git add README.md
```

`git add` 是一个多功能命令：
*   对未跟踪文件：开始跟踪。
*   对已修改文件：放入暂存区。
*   对合并冲突文件：标记为已解决。

## 忽略文件 (.gitignore)

通常我们会有一些不需要 Git 管理的文件，比如编译生成的临时文件、日志文件等。我们可以创建一个名为 `.gitignore` 的文件来列出要忽略的模式。

示例 `.gitignore`：
```gitignore
# 忽略所有 .a 结尾的文件
*.a
# 但 lib.a 除外
!lib.a
# 忽略 build/ 目录下的所有文件
build/
```

## 查看已暂存和未暂存的修改 (git diff)

`git status` 只能告诉你文件是否被修改，而 `git diff` 可以告诉你具体修改了哪些内容。

*   **`git diff`**：查看**工作目录**与**暂存区**之间的差异（即查看尚未暂存的修改）。
*   **`git diff --staged`**：查看**暂存区**与**最后一次提交**之间的差异（即查看即将提交的内容）。

## 提交更新 (git commit)

当所有需要保存的修改都已暂存后，就可以提交了：

```bash
git commit
```
这将启动你配置的文本编辑器，让你输入提交说明。

你也可以使用 `-m` 选项直接在命令行中输入提交说明：

```bash
git commit -m "Add getting started guide"
```

注意：只有在暂存区（Staged）中的变化才会被提交。
