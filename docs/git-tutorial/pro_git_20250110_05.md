---
slug: git-03-05-remote-branches
title: "Remote Branches — 摸得到的远程幻影"
authors: [yeezi]
tags: [git, progit, 远程分支, 跟踪]
date: 2025-01-10T13:00:00
---

远程分支（Remote Branches）是初学者最容易晕的地方。
你会经常看到 `master` 和 `origin/master`。它们名字很像，但本质完全不同。

如果不理解透彻，你会在 `git fetch` 和 `git pull` 的操作中迷失方向，搞出一些很难看的提交历史。

<!--truncate-->

### 什么是 origin/master？

`origin/master` 是一个**远程引用**。
你可以把它想象成是一个**只读的书签**。它准确地记录了：**在你可以连接服务器的最后一刻，服务器上的 master 分支指向哪里**。

哪怕你在本地的 `master` 上提交了100次，`origin/master` 还是会停留在原地不动。
直到你运行 `git push`（推上去）或者 `git fetch`（拉下来）时，Git 才会跟服务器通讯，更新这个 `origin/master` 指针的位置。

### 跟踪分支 (Tracking Branches)

当你从远程检出一个分支时：
```bash
$ git checkout --track origin/serverfix
```
或者简单写成：
```bash
$ git checkout serverfix
// (如果本地没有，但远程有这个分支，Git 会自动帮你建立跟踪关系)
```

这时候建立的本地分支 `serverfix`，就是一个**跟踪分支**（有时候也叫上游分支）。
它的好处是：
*   你直接输入 `git pull`，Git 知道去哪里拉代码。
*   你直接输入 `git push`，Git 知道往哪里推代码。
*   输入 `git status`，它会告诉你“你领先了远程2个提交”或者“落后了3个提交”。

### 拉取 (Pulling)

我们在 2.5 节提过，`git pull` = `git fetch` + `git merge`。
现在学了分支，你应该更能理解这句话：
`git fetch` 更新了 `origin/master` 指针。
`git merge` 把 `origin/master` 合并进你的当前分支。

### 删除远程分支

你的功能开发完，合并进主线了。本地分支删了，但远程仓库上那个 `feature-ui` 分支还在那儿飘着。
怎么删？

```bash
$ git push origin --delete feature-ui
```
或者旧一点的语法（很奇怪但很符合逻辑）：
```bash
$ git push origin :feature-ui
// 提取“空”推送到远程的 feature-ui，等于删除它
```

### 总结

要把 `origin/master` 看作是一个影子。它代表了远程的状态。
你不能直接在 `origin/master` 上工作（它会引发 Detached HEAD）。你只能在本地分支工作，然后通过 push/fetch 来同步这个影子。
理解了这一点，Git 的分布式模型在你脑海里就应该很立体了。
