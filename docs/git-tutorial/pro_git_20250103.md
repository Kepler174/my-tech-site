---
slug: progit-1-3-basics
title: "1.3 Git Basics — 思维方式的重构"
authors: [yeezi]
tags: [git, progit, 核心原理]
date: 2025-01-03T18:00:00
---

如果你之前使用的是 Subversion (SVN) 或者 Perforce，在转入 Git 的世界时，你需要做的第一件事不是学习命令，而是**遗忘**。

Git 与其他版本控制系统的核心区别，不在于命令行的语法，而在于它对待数据的方式。如果不理解这一点，你虽然也能使用 Git，但你很大程度上只是把它当成了一个更好用的 SVN，而无法发挥其真正的威力。

<!-- truncate -->

## 范式的转变：差异 vs 快照

传统版本控制系统（CVCS）通常将数据视为**一组文件的变化**。
这种系统的思维模型是：“版本 1 是文件 A 和 B；版本 2 是在版本 1 的基础上，文件 A 修改了第 3 行……”这就是所谓的**基于差异（Delta-based）**的版本控制。

Git 则完全不同。Git 更像是一个小型的文件系统。
每当你提交更新，或者保存项目状态时，Git 实际上是对当时的所有文件制作了一个**快照（Snapshot）**，并保存了这个快照的索引。

*   **为了效率**：如果一个文件没有被修改，Git 不会重复存储它，而是仅仅存储一个指向前一个版本的链接。
*   **本质**：Git 在保存的是**随着时间推移的项目状态流**，而不是变化的累积。

这种底层设计的差异，决定了 Git 在分支管理上的轻盈和高效。

## 三种状态：Git 的生命周期

理解 Git 的工作流程，核心在于理解数据在三个区域之间的流转。这是很多初学者容易混淆的地方，但也是 Git 最精妙的设计之一。

你的文件在 Git 中时刻处于以下三种状态之一：

1.  **已提交 (Committed)**
    数据已经安全地保存在本地数据库中。这就像是你已经按下快门，照片已经冲洗出来并存入相册。

2.  **已修改 (Modified)**
    你修改了文件，但还没有保存到数据库中。这就像是你调整了相机的焦距或构图，但还没按快门。

3.  **已暂存 (Staged)**
    这是一个非常独特的中间状态。你对一个已修改的文件做了标记，表示它将包含在下一次提交的快照中。这就像是你挑选好了要把哪些景物框进取景器，准备拍摄。

这引出了 Git 项目的三个工作区域：
*   **工作目录 (Working Directory)**：你平时写代码、看得到的那个文件夹。这只是从数据库中提取出的某一个版本的“投影”。
*   **暂存区 (Staging Area)**：通常只是一个文件，保存了下次将要提交的文件列表信息。
*   **Git 仓库 (Repository)**：保存项目数据的地方。

## 为什么要有暂存区？

不少开发者觉得暂存区多此一举：为什么不能像 SVN 一样直接提交？

这就涉及到了**提交的原子性**和**逻辑的清晰性**。
有些时候，你在同一个文件里既修复了一个 Bug，又开发了一个新功能。如果没有暂存区，你只能把这两个不相关的修改混在一次提交里。而有了暂存区，你可以先 `add` 修复 Bug 的代码并提交，然后再 `add` 新功能的代码并提交。

这种精细化的控制，让我们的版本历史不仅仅是代码的备份，更成为了一份逻辑清晰的项目演进日志。
