---
slug: git-05-02-contributing-guidelines
title: "5.2 Contributing Guide — 提交代码的礼节与规范"
authors: [yeezi]
tags: [git, progit, 规范, Commit]
date: 2025-01-12T10:00:00
---

在这一节，我不打算教你新的 Git 命令。我要教你的，是 **“Git 礼仪”**。
作为技术专家，我 Review 过无数新人的代码。很多时候，代码逻辑本身没有大问题，但那个 **Commit Message** 和 **提交粒度** 简直让人血压升高。

如果你想让你的 PR 快速被合入，或者想在开源社区赢得尊重，请遵守以下规则。

<!--truncate-->

### 1. 提交粒度：原子性 (Atomicity)

**不要把五个不同的 bug 修复放在同一个 commit 里！**
这是最常见的错误。你修了 A 功能的 UI，顺手改了 B 功能的逻辑，还重构了 C 模块的拼写错误。最后提交一个 commit：`fix everything`。

这在 Code Review 时是灾难。如果你的 B 功能改错了，我必须回滚整个提交，导致 A 和 C 的修复也丢了。

**专家建议**：一个 Commit 只做一件事。
如果你改了三个无关的东西，请分三次 `git add` 和 `git commit`。

### 2. 也是最重要的：Commit Message 规范

`git commit -m "update"` 是绝对禁止的。
`git commit -m "fix bug"` 也是不及格的。

一个好的 Commit Message 应该像是一篇短新闻：
*   **标题 (Subject)**：简明扼要，50字符以内。最好用祈使句（如 "Add feature" 而不是 "Added feature"）。
*   **正文 (Body)**：解释 **为什么** 要做这个修改，而不是 **怎么** 改的（怎么改的我看代码就知道了）。解释当时的权衡和背景。

**范例：**

```text
Summarize changes in around 50 characters or less

More detailed explanatory text, if necessary. Wrap it to about 72
characters or so. In some contexts, the first line is treated as the
subject of the email and the rest of the text as the body.

Further paragraphs come after blank lines.

 - Bullet points are okay, too
 - Typically a hyphen or asterisk is used for the bullet, preceded
   by a single space
```

### 3. 处理空白字符

有时候你只是在代码尾部加了个回车，或者是调整了缩进。Git 会认为每一行都变了。
在提交前，请运行 `git diff --check`。
它会帮你找出那些可能会引起误会的空白字符错误（比如行尾多余的空格）。

### 总结

提交代码不仅仅是把数据存入数据库，它是在**与如果不远的将来的维护者（很可能就是你自己）对话**。
清晰、原子化、文档完备的提交历史，是一个工程师职业素养的最高体现。
