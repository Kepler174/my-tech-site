---
slug: git-03-03-branch-management
title: "3.3 分支管理 — 保持井井有条"
authors: [yeezi]
tags: [git, progit, 管理]
date: 2025-01-10T11:00:00
---

随着你用 Git 越来越熟练，你会发现自己不知不觉创建了一大堆分支。
`feature-login`
`fix-header-bug`
`test-new-ui`
`experiment-database`
...
这时候，你需要一些简单的命令来管理这一堆“便利贴”。

<!--truncate-->

### 列出分支

最基本的命令：
```bash
$ git branch
```
这会列出所有本地分支，`*` 号表示你当前所在的分支。

如果你想看每个分支最后一次提交了什么：
```bash
$ git branch -v
```

### 哪些分支已经合并了？

这可能是最有用的筛选命令。
当你的功能开发完了，你想清理一下本地分支，但你不确定哪些分支的代码已经合并进了主线，哪些还没。

```bash
$ git branch --merged
```
这个列表里的分支（除了星号那个），通常都是可以安全删除的。因为它们的代码已经“落袋为安”了。

反之：
```bash
$ git branch --no-merged
```
这里列出的分支，包含了一些尚未合并的工作。如果你试图用 `git branch -d` 删除它们，Git 会报错阻止你，因为它怕你弄丢数据。

### 强制删除

但如果你真的想删呢？
比如你开了一个分支做实验，写了一堆代码后发现这个方案完全行不通，想彻底废弃。
Git 告诉你“包含未合并的工作”，但你心里清楚“我就是不要了”。

这时候需要用大写的 `-D`：

```bash
$ git branch -D bad-experiment
```
`-D` 相当于 `--delete --force`。物理毁灭，概不负责，请谨慎使用。

### 分支改名

人总有手滑的时候，或者起名字起得太随意，后来后悔了。
比如把 `feature-signin` 打成了 `feature-sigin`。

```bash
$ git branch -m <old_name> <new_name>
```

如果已经在当前分支上，直接：
```bash
$ git branch -m new-name
```

### 总结

管理分支就像整理办公桌。
定期的 `git branch -d` 清理那些已经合并的分支，能让你的 `git branch` 列表保持清爽。我不希望你在终端里敲下命令后，需要翻好几页才能找到自己想要的分支。技术专家的工作环境，应该是干净、高效且受控的。
